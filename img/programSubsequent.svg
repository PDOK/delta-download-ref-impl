<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" contentScriptType="application/ecmascript" contentStyleType="text/css"
     height="685px" preserveAspectRatio="none" style="width:907px;height:685px;" version="1.1" viewBox="0 0 907 685"
     width="907px" zoomAndPan="magnify">
    <defs>
        <filter height="300%" id="fkne4mb6z9y15" width="300%" x="-1" y="-1">
            <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
            <feColorMatrix in="blurOut" result="blurOut2" type="matrix"
                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
            <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
            <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
        </filter>
    </defs>
    <g>
        <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs"
              text-decoration="underline" textLength="360" x="270.5" y="27.4023">Sequential Download Sequence1 Diagram
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="0"
              x="453.5" y="48.6016"/>
        <rect fill="#FFFFFF" filter="url(#fkne4mb6z9y15)" height="295.1055" style="stroke: #000000; stroke-width: 2.0;"
              width="875" x="13" y="299.4395"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="42" x2="42" y1="121.8867"
              y2="611.5449"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="246" x2="246" y1="121.8867"
              y2="611.5449"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="396" x2="396" y1="121.8867"
              y2="611.5449"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="520" x2="520" y1="121.8867"
              y2="611.5449"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="681" x2="681" y1="121.8867"
              y2="611.5449"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="845" x2="845" y1="121.8867"
              y2="611.5449"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32"
              x="23" y="118.9336">Flow
        </text>
        <ellipse cx="42" cy="89.3984" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="38,77.3984,44,72.3984,42,77.3984,44,82.3984,38,77.3984"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32"
              x="23" y="624.0801">Flow
        </text>
        <ellipse cx="42" cy="643.0332" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="38,631.0332,44,626.0332,42,631.0332,44,636.0332,38,631.0332"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152"
              x="167" y="118.9336">DeltaDownloadService
        </text>
        <ellipse cx="246" cy="89.3984" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="242,77.3984,248,72.3984,246,77.3984,248,82.3984,242,77.3984"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152"
              x="167" y="624.0801">DeltaDownloadService
        </text>
        <ellipse cx="246" cy="643.0332" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="242,631.0332,248,626.0332,246,631.0332,248,636.0332,242,631.0332"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117"
              x="335" y="118.9336">DownloadService
        </text>
        <ellipse cx="396.5" cy="89.3984" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="392.5,77.3984,398.5,72.3984,396.5,77.3984,398.5,82.3984,392.5,77.3984"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117"
              x="335" y="624.0801">DownloadService
        </text>
        <ellipse cx="396.5" cy="643.0332" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="392.5,631.0332,398.5,626.0332,396.5,631.0332,398.5,636.0332,392.5,631.0332"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99"
              x="468" y="118.9336">Zipfile2Stream
        </text>
        <ellipse cx="520.5" cy="89.3984" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="516.5,77.3984,522.5,72.3984,520.5,77.3984,522.5,82.3984,516.5,77.3984"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99"
              x="468" y="624.0801">Zipfile2Stream
        </text>
        <ellipse cx="520.5" cy="643.0332" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="516.5,631.0332,522.5,626.0332,520.5,631.0332,522.5,636.0332,516.5,631.0332"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111"
              x="623" y="118.9336">DatabaseFacade
        </text>
        <ellipse cx="681.5" cy="89.3984" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="677.5,77.3984,683.5,72.3984,681.5,77.3984,683.5,82.3984,677.5,77.3984"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111"
              x="623" y="624.0801">DatabaseFacade
        </text>
        <ellipse cx="681.5" cy="643.0332" fill="#FEFECE" filter="url(#fkne4mb6z9y15)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="677.5,631.0332,683.5,626.0332,681.5,631.0332,683.5,636.0332,677.5,631.0332"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59"
              x="813" y="118.9336">Postgres
        </text>
        <path d="M827.5,69.3984 C827.5,59.3984 845.5,59.3984 845.5,59.3984 C845.5,59.3984 863.5,59.3984 863.5,69.3984 L863.5,95.3984 C863.5,105.3984 845.5,105.3984 845.5,105.3984 C845.5,105.3984 827.5,105.3984 827.5,95.3984 L827.5,69.3984 "
              fill="#FEFECE" filter="url(#fkne4mb6z9y15)" style="stroke: #000000; stroke-width: 1.5;"/>
        <path d="M827.5,69.3984 C827.5,79.3984 845.5,79.3984 845.5,79.3984 C845.5,79.3984 863.5,79.3984 863.5,69.3984 "
              fill="none" style="stroke: #000000; stroke-width: 1.5;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59"
              x="813" y="624.0801">Postgres
        </text>
        <path d="M827.5,637.0332 C827.5,627.0332 845.5,627.0332 845.5,627.0332 C845.5,627.0332 863.5,627.0332 863.5,637.0332 L863.5,663.0332 C863.5,673.0332 845.5,673.0332 845.5,673.0332 C845.5,673.0332 827.5,673.0332 827.5,663.0332 L827.5,637.0332 "
              fill="#FEFECE" filter="url(#fkne4mb6z9y15)" style="stroke: #000000; stroke-width: 1.5;"/>
        <path d="M827.5,637.0332 C827.5,647.0332 845.5,647.0332 845.5,647.0332 C845.5,647.0332 863.5,647.0332 863.5,637.0332 "
              fill="none" style="stroke: #000000; stroke-width: 1.5;"/>
        <polygon fill="#A80036" points="669.5,149.1973,679.5,153.1973,669.5,157.1973,673.5,153.1973"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="675.5" y1="153.1973" y2="153.1973"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102"
              x="49" y="148.4551">get last delta-id
        </text>
        <polygon fill="#A80036" points="833.5,178.5078,843.5,182.5078,833.5,186.5078,837.5,182.5078"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="681.5" x2="839.5" y1="182.5078" y2="182.5078"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80"
              x="688.5" y="177.7656">find delta-id
        </text>
        <polygon fill="#A80036" points="692.5,207.8184,682.5,211.8184,692.5,215.8184,688.5,211.8184"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="686.5" x2="844.5" y1="211.8184" y2="211.8184"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51"
              x="698.5" y="207.0762">delta-id
        </text>
        <polygon fill="#A80036" points="53,221.8184,43,225.8184,53,229.8184,49,225.8184"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="680.5" y1="225.8184" y2="225.8184"/>
        <polygon fill="#A80036" points="234,251.1289,244,255.1289,234,259.1289,238,255.1289"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="240" y1="255.1289" y2="255.1289"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180"
              x="49" y="250.3867">get delta's after last delta-id
        </text>
        <polygon fill="#A80036" points="53,280.4395,43,284.4395,53,288.4395,49,284.4395"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="245" y1="284.4395" y2="284.4395"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57"
              x="59" y="279.6973">delta id's
        </text>
        <path d="M13,299.4395 L87,299.4395 L87,306.4395 L77,316.4395 L13,316.4395 L13,299.4395 " fill="#EEEEEE"
              style="stroke: #000000; stroke-width: 1.0;"/>
        <rect fill="none" height="295.1055" style="stroke: #000000; stroke-width: 2.0;" width="875" x="13"
              y="299.4395"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs"
              textLength="29" x="28" y="313.0078">loop
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs"
              textLength="62" x="102" y="312.0742">[delta-id's]
        </text>
        <polygon fill="#A80036" points="384.5,334.0605,394.5,338.0605,384.5,342.0605,388.5,338.0605"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="390.5" y1="338.0605" y2="338.0605"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121"
              x="49" y="333.3184">get file for delta-id
        </text>
        <polygon fill="#A80036" points="508.5,363.3711,518.5,367.3711,508.5,371.3711,512.5,367.3711"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="396.5" x2="514.5" y1="367.3711" y2="367.3711"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82"
              x="403.5" y="362.6289">parseZipfile()
        </text>
        <polygon fill="#A80036" points="669.5,392.6816,679.5,396.6816,669.5,400.6816,673.5,396.6816"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="520.5" x2="675.5" y1="396.6816" y2="396.6816"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137"
              x="527.5" y="391.9395">insertMutationGroups
        </text>
        <polygon fill="#A80036" points="833.5,421.9922,843.5,425.9922,833.5,429.9922,837.5,425.9922"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="681.5" x2="839.5" y1="425.9922" y2="425.9922"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140"
              x="688.5" y="421.25">batch mutationgroups
        </text>
        <polygon fill="#A80036" points="692.5,451.3027,682.5,455.3027,692.5,459.3027,688.5,455.3027"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="686.5" x2="844.5" y1="455.3027" y2="455.3027"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104"
              x="698.5" y="450.5605">update response
        </text>
        <polygon fill="#A80036" points="53,465.3027,43,469.3027,53,473.3027,49,469.3027"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="680.5" y1="469.3027" y2="469.3027"/>
        <polygon fill="#A80036" points="669.5,494.6133,679.5,498.6133,669.5,502.6133,673.5,498.6133"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="675.5" y1="498.6133" y2="498.6133"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83"
              x="49" y="493.8711">save delta-id
        </text>
        <polygon fill="#A80036" points="833.5,523.9238,843.5,527.9238,833.5,531.9238,837.5,527.9238"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="681.5" x2="839.5" y1="527.9238" y2="527.9238"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91"
              x="688.5" y="523.1816">insert delta-id
        </text>
        <polygon fill="#A80036" points="692.5,553.2344,682.5,557.2344,692.5,561.2344,688.5,557.2344"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="686.5" x2="844.5" y1="557.2344" y2="557.2344"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51"
              x="698.5" y="552.4922">inserted
        </text>
        <polygon fill="#A80036" points="53,582.5449,43,586.5449,53,590.5449,49,586.5449"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="680.5" y1="586.5449" y2="586.5449"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225"
              x="59" y="581.8027">finished processing file for delta-id
        </text><!--MD5=[f7341370d4077a2bb1e81bce868f3944]
@startuml img/programSubsequent

title __Sequential Download Sequence1 Diagram__\n

control Flow

control DeltaDownloadService
control DownloadService
control Zipfile2Stream

control DatabaseFacade
database Postgres

Flow -> DatabaseFacade: get last delta-id
DatabaseFacade -> Postgres : find delta-id
Postgres -> DatabaseFacade: delta-id
DatabaseFacade -> Flow

Flow -> DeltaDownloadService: get delta's after last delta-id
DeltaDownloadService -> Flow : delta id's

loop delta-id's
Flow -> DownloadService : get file for delta-id
DownloadService -> Zipfile2Stream : parseZipfile()
Zipfile2Stream -> DatabaseFacade : insertMutationGroups
DatabaseFacade -> Postgres : batch mutationgroups
Postgres -> DatabaseFacade: update response
DatabaseFacade -> Flow
Flow -> DatabaseFacade: save delta-id
DatabaseFacade -> Postgres: insert delta-id
Postgres -> DatabaseFacade: inserted
DatabaseFacade -> Flow: finished processing file for delta-id
end

@enduml

PlantUML version 1.2020.17(Sat Sep 19 14:30:11 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
-->
    </g>
</svg>