<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" contentScriptType="application/ecmascript" contentStyleType="text/css"
     height="537px" preserveAspectRatio="none" style="width:615px;height:537px;" version="1.1" viewBox="0 0 615 537"
     width="615px" zoomAndPan="magnify">
    <defs>
        <filter height="300%" id="f1gasb1pbur227" width="300%" x="-1" y="-1">
            <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
            <feColorMatrix in="blurOut" result="blurOut2" type="matrix"
                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
            <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
            <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
        </filter>
    </defs>
    <g>
        <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs"
              text-decoration="underline" textLength="318" x="149.5" y="27.4023">Initial Download Sequence1 Diagram
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="0"
              x="311.5" y="48.6016"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="27" x2="27" y1="121.8867"
              y2="464.3027"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="117" x2="117" y1="121.8867"
              y2="464.3027"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="241" x2="241" y1="121.8867"
              y2="464.3027"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="402" x2="402" y1="121.8867"
              y2="464.3027"/>
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="576" x2="576" y1="121.8867"
              y2="464.3027"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32"
              x="8" y="118.9336">Flow
        </text>
        <ellipse cx="27" cy="89.3984" fill="#FEFECE" filter="url(#f1gasb1pbur227)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="23,77.3984,29,72.3984,27,77.3984,29,82.3984,23,77.3984"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32"
              x="8" y="476.8379">Flow
        </text>
        <ellipse cx="27" cy="495.791" fill="#FEFECE" filter="url(#f1gasb1pbur227)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="23,483.791,29,478.791,27,483.791,29,488.791,23,483.791"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117"
              x="56" y="118.9336">DownloadService
        </text>
        <ellipse cx="117.5" cy="89.3984" fill="#FEFECE" filter="url(#f1gasb1pbur227)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="113.5,77.3984,119.5,72.3984,117.5,77.3984,119.5,82.3984,113.5,77.3984"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117"
              x="56" y="476.8379">DownloadService
        </text>
        <ellipse cx="117.5" cy="495.791" fill="#FEFECE" filter="url(#f1gasb1pbur227)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="113.5,483.791,119.5,478.791,117.5,483.791,119.5,488.791,113.5,483.791"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99"
              x="189" y="118.9336">Zipfile2Stream
        </text>
        <ellipse cx="241.5" cy="89.3984" fill="#FEFECE" filter="url(#f1gasb1pbur227)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="237.5,77.3984,243.5,72.3984,241.5,77.3984,243.5,82.3984,237.5,77.3984"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99"
              x="189" y="476.8379">Zipfile2Stream
        </text>
        <ellipse cx="241.5" cy="495.791" fill="#FEFECE" filter="url(#f1gasb1pbur227)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="237.5,483.791,243.5,478.791,241.5,483.791,243.5,488.791,237.5,483.791"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111"
              x="344" y="118.9336">DatabaseFacade
        </text>
        <ellipse cx="402.5" cy="89.3984" fill="#FEFECE" filter="url(#f1gasb1pbur227)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="398.5,77.3984,404.5,72.3984,402.5,77.3984,404.5,82.3984,398.5,77.3984"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111"
              x="344" y="476.8379">DatabaseFacade
        </text>
        <ellipse cx="402.5" cy="495.791" fill="#FEFECE" filter="url(#f1gasb1pbur227)" rx="12" ry="12"
                 style="stroke: #A80036; stroke-width: 2.0;"/>
        <polygon fill="#A80036" points="398.5,483.791,404.5,478.791,402.5,483.791,404.5,488.791,398.5,483.791"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59"
              x="544" y="118.9336">Postgres
        </text>
        <path d="M558.5,69.3984 C558.5,59.3984 576.5,59.3984 576.5,59.3984 C576.5,59.3984 594.5,59.3984 594.5,69.3984 L594.5,95.3984 C594.5,105.3984 576.5,105.3984 576.5,105.3984 C576.5,105.3984 558.5,105.3984 558.5,95.3984 L558.5,69.3984 "
              fill="#FEFECE" filter="url(#f1gasb1pbur227)" style="stroke: #000000; stroke-width: 1.5;"/>
        <path d="M558.5,69.3984 C558.5,79.3984 576.5,79.3984 576.5,79.3984 C576.5,79.3984 594.5,79.3984 594.5,69.3984 "
              fill="none" style="stroke: #000000; stroke-width: 1.5;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59"
              x="544" y="476.8379">Postgres
        </text>
        <path d="M558.5,489.791 C558.5,479.791 576.5,479.791 576.5,479.791 C576.5,479.791 594.5,479.791 594.5,489.791 L594.5,515.791 C594.5,525.791 576.5,525.791 576.5,525.791 C576.5,525.791 558.5,525.791 558.5,515.791 L558.5,489.791 "
              fill="#FEFECE" filter="url(#f1gasb1pbur227)" style="stroke: #000000; stroke-width: 1.5;"/>
        <path d="M558.5,489.791 C558.5,499.791 576.5,499.791 576.5,499.791 C576.5,499.791 594.5,499.791 594.5,489.791 "
              fill="none" style="stroke: #000000; stroke-width: 1.5;"/>
        <polygon fill="#A80036" points="390.5,149.1973,400.5,153.1973,390.5,157.1973,394.5,153.1973"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="396.5" y1="153.1973" y2="153.1973"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161"
              x="34" y="148.4551">findLastMutationMessage
        </text>
        <polygon fill="#A80036" points="564.5,178.5078,574.5,182.5078,564.5,186.5078,568.5,182.5078"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="402.5" x2="570.5" y1="182.5078" y2="182.5078"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25"
              x="409.5" y="177.7656">find
        </text>
        <polygon fill="#A80036" points="413.5,207.8184,403.5,211.8184,413.5,215.8184,409.5,211.8184"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="407.5" x2="575.5" y1="211.8184" y2="211.8184"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146"
              x="419.5" y="207.0762">MutationMessage [0..1]
        </text>
        <polygon fill="#A80036" points="128.5,237.1289,118.5,241.1289,128.5,245.1289,124.5,241.1289"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="122.5" x2="401.5" y1="241.1289" y2="241.1289"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106"
              x="134.5" y="236.3867">get initial ZipFile
        </text>
        <polygon fill="#A80036" points="229.5,266.4395,239.5,270.4395,229.5,274.4395,233.5,270.4395"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="117.5" x2="235.5" y1="270.4395" y2="270.4395"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82"
              x="124.5" y="265.6973">parseZipfile()
        </text>
        <polygon fill="#A80036" points="390.5,295.75,400.5,299.75,390.5,303.75,394.5,299.75"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="241.5" x2="396.5" y1="299.75" y2="299.75"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137"
              x="248.5" y="295.0078">insertMutationGroups
        </text>
        <polygon fill="#A80036" points="564.5,325.0605,574.5,329.0605,564.5,333.0605,568.5,329.0605"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="402.5" x2="570.5" y1="329.0605" y2="329.0605"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140"
              x="409.5" y="324.3184">batch mutationgroups
        </text>
        <polygon fill="#A80036" points="413.5,354.3711,403.5,358.3711,413.5,362.3711,409.5,358.3711"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="407.5" x2="575.5" y1="358.3711" y2="358.3711"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104"
              x="419.5" y="353.6289">update response
        </text>
        <polygon fill="#A80036" points="564.5,383.6816,574.5,387.6816,564.5,391.6816,568.5,387.6816"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="402.5" x2="570.5" y1="387.6816" y2="387.6816"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150"
              x="409.5" y="382.9395">Insert MutationMessage
        </text>
        <polygon fill="#A80036" points="413.5,412.9922,403.5,416.9922,413.5,420.9922,409.5,416.9922"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="407.5" x2="575.5" y1="416.9922" y2="416.9922"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51"
              x="419.5" y="412.25">inserted
        </text>
        <polygon fill="#A80036" points="38,442.3027,28,446.3027,38,450.3027,34,446.3027"
                 style="stroke: #A80036; stroke-width: 1.0;"/>
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="401.5" y1="446.3027" y2="446.3027"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207"
              x="44" y="441.5605">finished processing initial zipfile
        </text><!--MD5=[238632c853759b8809413245a45a6398]
@startuml img/programInitial

title __Initial Download Sequence1 Diagram__\n

control Flow

control DownloadService
control Zipfile2Stream

control DatabaseFacade
database Postgres

Flow -> DatabaseFacade: findLastMutationMessage
DatabaseFacade -> Postgres : find
Postgres -> DatabaseFacade: MutationMessage [0..1]

DatabaseFacade -> DownloadService : get initial ZipFile
DownloadService -> Zipfile2Stream : parseZipfile()

Zipfile2Stream -> DatabaseFacade : insertMutationGroups
DatabaseFacade -> Postgres : batch mutationgroups
Postgres -> DatabaseFacade: update response
DatabaseFacade -> Postgres: Insert MutationMessage
Postgres -> DatabaseFacade: inserted 
DatabaseFacade -> Flow: finished processing initial zipfile  

@enduml

PlantUML version 1.2020.17(Sat Sep 19 14:30:11 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
-->
    </g>
</svg>